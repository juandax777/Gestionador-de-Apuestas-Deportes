<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Historial de Apuestas</title>
    <div th:if="${mensaje}" class="alert alert-success">
        <span th:text="${mensaje}"></span>
    </div>
    <div th:if="${error}" class="alert alert-danger">
        <span th:text="${error}"></span>
    </div>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-5">
    <h2 class="text-center">Historial de Apuestas</h2>
    <table class="table table-striped mt-4">
        <thead>
        <tr>
            <th>Equipo Local</th>
            <th>Marcador</th>
            <th>Equipo Visitante</th>
            <th>Tipo de Cuota</th>
            <th>Cuota</th>
            <th>Monto Apostado</th>
            <th>Estado</th>
            <th>Acción</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="apuesta : ${apuestas}">
            <td th:text="${apuesta.equipoLocal}"></td>
            <td th:text="${apuesta.resultado != null ? apuesta.resultado : 'Por jugar'}"></td>
            <td th:text="${apuesta.equipoVisitante}"></td>
            <td th:text="${apuesta.tipoCuota}"></td>
            <td th:text="${apuesta.cuotaSeleccionada}"></td>
            <td th:text="${apuesta.montoApostado}"></td>
            <td>
            <span th:text="${apuesta.estado}"
                  th:classappend="${apuesta.estado == 'Ganada'} ? ' text-success' : (apuesta.estado == 'Perdida' ? ' text-danger' : '')"></span>
            </td>
            <td>
                <div th:if="${apuesta.estado == 'Pendiente'}">
                    <form th:action="@{/cancelarApuesta}" method="post">
                        <input type="hidden" th:value="${apuesta.idApuesta}" name="idApuesta"/>
                        <input type="hidden" th:value="${usuario}" name="usuario"/>
                        <button type="submit" class="btn btn-sm btn-danger">Cancelar</button>
                    </form>
                </div>
                <div th:if="${apuesta.estado != 'Pendiente'}">
                    <!-- Espacio vacío para mantener la alineación -->
                </div>
            </td>
        </tr>
        </tbody>
    </table>
    <a th:href="@{/paginaPrincipal(usuario=${usuario})}" class="btn btn-secondary mt-3">Volver al Inicio</a>
</div>
</body>
</html>
